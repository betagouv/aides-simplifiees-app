# Aides Simplifiées - Environment Variables Template
# Copy to .env (local dev), .env.preprod, or .env.prod
# Generate secrets with: make secrets

# Application
APP_NAME=Aides Simplifiées
APP_ENV=development                               # development, test, staging, production
APP_KEY=                                          # make secrets
PUBLIC_APP_URL=http://localhost:3333
LOG_LEVEL=info                                    # debug, info, warn, error
SESSION_DRIVER=cookie                             # cookie, memory

# Local dev only (set in docker-compose for preprod/prod)
NODE_ENV=development
HOST=localhost
PORT=3333
DB_HOST=localhost
DB_PORT=5432
OPENFISCA_URL=http://localhost:5001/calculate
LEXIMPACT_URL=http://localhost:3000

# Database
DB_USER=aides-simplifiees
DB_DATABASE=aides-simplifiees-dev                 # -dev, -preprod, -prod
DB_PASSWORD=                                      # make secrets

# Authentication
ADMIN_LOGIN=admin@example.com
ADMIN_PASSWORD=                                   # make secrets

# Monitoring
MONITORING_SECRET=                                # make secrets

# Analytics
MATOMO_URL=https://stats.beta.gouv.fr
MATOMO_SITE_ID=
MATOMO_TOKEN=

# Docker Resource Limits (preprod/prod only)
# See docs/technical/infrastructure.md for sizing guidelines
# Defaults are set in docker-compose files; override here as needed

# Main App
# APP_CPU_LIMIT=2.0                               # prod: 2.0, preprod: 0.5
# APP_MEM_LIMIT=512M                              # prod: 512M, preprod: 192M
# APP_CPU_RESERVATION=0.5
# APP_MEM_RESERVATION=256M

# OpenFisca (memory-intensive, ~300MB per worker)
# OPENFISCA_CPU_LIMIT=3.5                         # prod: 3.5, preprod: 1.0
# OPENFISCA_MEM_LIMIT=3G                          # prod: 3G, preprod: 1G
# OPENFISCA_CPU_RESERVATION=1.0
# OPENFISCA_MEM_RESERVATION=1G

# LexImpact
# LEXIMPACT_CPU_LIMIT=1.0                         # prod: 1.0, preprod: 0.25
# LEXIMPACT_MEM_LIMIT=256M                        # prod: 256M, preprod: 64M
# LEXIMPACT_CPU_RESERVATION=0.25
# LEXIMPACT_MEM_RESERVATION=128M

# PostgreSQL
# DB_CPU_LIMIT=2.0                                # prod: 2.0, preprod: 0.5
# DB_MEM_LIMIT=1G                                 # prod: 1G, preprod: 256M
# DB_CPU_RESERVATION=0.5
# DB_MEM_RESERVATION=256M

# Backup service
# BACKUP_CPU_LIMIT=0.25                           # prod: 0.25, preprod: 0.1
# BACKUP_MEM_LIMIT=64M                            # prod: 64M, preprod: 32M
# BACKUP_CPU_RESERVATION=0.1
# BACKUP_MEM_RESERVATION=32M
